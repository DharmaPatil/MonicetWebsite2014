<?php


/**
 * Skeleton subclass for performing query and update operations on the 'news_article' table.
 *
 * 
 *
 * This class was autogenerated by Propel 1.4.0 on:
 *
 * Fri Dec 11 16:11:00 2009
 *
 * You should add additional methods to this class to meet the
 * application requirements.  This class will only be generated as
 * long as it does not already exist in the output directory.
 *
 * @package    lib.model
 */
class NewsArticlePeer extends BaseNewsArticlePeer {
	public static function getCriteria()
	{
		$user = sfContext::getInstance()->getUser();
    $request = sfContext::getInstance()->getRequest();
    
		$criteria = NewsArticleQuery::create()
		  ->filterByIsPublished(true)
      ->add(NewsArticlePeer::ENTER_DATE, time(), Criteria::LESS_EQUAL)
      ->addOr(NewsArticlePeer::ENTER_DATE, null, Criteria::ISNULL)
      ->add(NewsArticlePeer::EXIT_DATE, time(), Criteria::GREATER_EQUAL)
      ->addOr(NewsArticlePeer::EXIT_DATE, null, Criteria::ISNULL)
      ->orderByPublishDate(Criteria::ASC)
		  ->useNewsArticleI18nQuery()
        ->filterByCulture($user->getCulture())
      ->enduse();
    return $criteria;
	}
  public static function getPager()
  {   	
  	$request = sfContext::getInstance()->getRequest();
  	$criteria = self::getCriteria();
    return $criteria->paginate($request->getParameter('page', 1), 10);
  }
  public static function doSelectRecentNews()
  {
  	$criteria = self::getCriteria();
    return $criteria->
      limit(4)->
      find();
  }
  public static function doSelectFeedRecentNews()
  {
    $criteria = self::getCriteria();
    return $criteria->
      limit(10)->
      find();
  }
} // NewsArticlePeer
